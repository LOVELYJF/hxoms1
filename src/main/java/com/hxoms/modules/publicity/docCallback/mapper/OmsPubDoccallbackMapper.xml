<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hxoms.modules.publicity.docCallback.mapper.OmsPubDoccallbackMapper">
  <resultMap id="BaseResultMap" type="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="USER_ID" jdbcType="VARCHAR" property="userId" />
    <result column="RECEIVER" jdbcType="VARCHAR" property="receiver" />
    <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
    <result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
    <result column="RECEIVE_TIME" jdbcType="DATE" property="receiveTime" />
    <result column="RECEIVE_DESC" jdbcType="VARCHAR" property="receiveDesc" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    ID, USER_ID, RECEIVER, ORG_ID, MOBILE, RECEIVE_TIME, RECEIVE_DESC
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    select 
    <include refid="Base_Column_List" />
    from oms_pub_doccallback
    where ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    delete from oms_pub_doccallback
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    insert into oms_pub_doccallback (ID, USER_ID, RECEIVER, 
      ORG_ID, MOBILE, RECEIVE_TIME, 
      RECEIVE_DESC)
    values (#{id,jdbcType=VARCHAR}, #{userId,jdbcType=VARCHAR}, #{receiver,jdbcType=VARCHAR}, 
      #{orgId,jdbcType=VARCHAR}, #{mobile,jdbcType=VARCHAR}, #{receiveTime,jdbcType=DATE}, 
      #{receiveDesc,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    insert into oms_pub_doccallback
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="userId != null">
        USER_ID,
      </if>
      <if test="receiver != null">
        RECEIVER,
      </if>
      <if test="orgId != null">
        ORG_ID,
      </if>
      <if test="mobile != null">
        MOBILE,
      </if>
      <if test="receiveTime != null">
        RECEIVE_TIME,
      </if>
      <if test="receiveDesc != null">
        RECEIVE_DESC,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="orgId != null">
        #{orgId,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="receiveTime != null">
        #{receiveTime,jdbcType=DATE},
      </if>
      <if test="receiveDesc != null">
        #{receiveDesc,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    update oms_pub_doccallback
    <set>
      <if test="userId != null">
        USER_ID = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        RECEIVER = #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="orgId != null">
        ORG_ID = #{orgId,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        MOBILE = #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="receiveTime != null">
        RECEIVE_TIME = #{receiveTime,jdbcType=DATE},
      </if>
      <if test="receiveDesc != null">
        RECEIVE_DESC = #{receiveDesc,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 15:32:49 CST 2020.
    -->
    update oms_pub_doccallback
    set USER_ID = #{userId,jdbcType=VARCHAR},
      RECEIVER = #{receiver,jdbcType=VARCHAR},
      ORG_ID = #{orgId,jdbcType=VARCHAR},
      MOBILE = #{mobile,jdbcType=VARCHAR},
      RECEIVE_TIME = #{receiveTime,jdbcType=DATE},
      RECEIVE_DESC = #{receiveDesc,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <select id="selectCanCallbApplyAll" parameterType="java.lang.String" resultType="com.hxoms.modules.publicity.docCallback.entity.parameterEntity.SelCanCallbApplyVO">
    SELECT
        a.ID id,
		a.ZTDW ztdw,
        a.CGSPDW cgspdw,
		b.WORK_UNIT work_Unit,
		CONCAT(b.SURNAME, b.NAME) name,
		date_format(a.CGSJ,'%Y.%m.%d') cgsj,
        date_format(a.HGSJ,'%Y.%m.%d') hgsj,
		a.SDGJ sdgj,
		a.CFRW cfrw,
	    b.SEX sex,
		b.BIRTH_DATE birth_Date,
		b.POLITICAL_AFFINAME political_AffiName,
		b.POST post,
		a.CREATE_TIME create_Time,
		a.SFLG sflg,
		a.SMDJ smdj,
		b.MAIN_LEADER main_Leader,
		a.FMXX fmxx,
		a.CLSHSFTG clshsftg,
		a.JWJL jwjl,
		a.ZZJL zzjl
    FROM
        cf_user u
    INNER JOIN b01 d ON u.org_id = d.b0111
    INNER JOIN oms_pub_apply a ON d.b0100 = a.B0100
    INNER JOIN oms_reg_procpersoninfo b ON a.A0100 = b.A0100
	LEFT JOIN oms_pub_destroydetail c ON a.id=c.id
    WHERE
            u.user_id = #{id}
	AND a.SQZT='31'
	AND a.PWH is NOT NULL
	AND a.PWH !=''
	AND c.id is null
  </select>
  <select id="SelCallbackRegByQuaVoAll" parameterType="com.hxoms.modules.publicity.docCallback.entity.parameterEntity.SelCallbackRegByQuaVo" resultType="com.hxoms.modules.publicity.docCallback.entity.OmsPubDoccallback">
    SELECT
        a.ID id,
        a.RECEIVER receiver,
        a.ORG_ID orgId,
        a.MOBILE mobile,
        a.RECEIVE_TIME receiveTime,
        a.RECEIVE_DESC receiveDesc
    FROM
    cf_user b
    INNER JOIN oms_pub_doccallback a ON b.org_id = a.ORG_ID
    WHERE
    b.user_id = #{id}
    <if test="startDate!=null">
      AND a.RECEIVE_TIME &gt;=#{startDate}
    </if>
    <if test="endDate!=null">
      AND a.RECEIVE_TIME &lt;=#{endDate}
    </if>
    <if test="applyName!=null and applyName!=''">
      AND a.RECEIVE_DESC LIKE concat('%',#{applyName},'%')
    </if>
  </select>
</mapper>