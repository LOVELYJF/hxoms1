<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hxoms.modules.publicity.destroyReg.mapper.OmsPubDestroyMapper">
  <resultMap id="BaseResultMap" type="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="USER_ID" jdbcType="VARCHAR" property="userId" />
    <result column="DESTROYER" jdbcType="VARCHAR" property="destroyer" />
    <result column="ORG_ID" jdbcType="VARCHAR" property="orgId" />
    <result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
    <result column="DESTROY_TIME" jdbcType="DATE" property="destroyTime" />
    <result column="DESTROY_DESC" jdbcType="VARCHAR" property="destroyDesc" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    ID, USER_ID, DESTROYER, ORG_ID, MOBILE, DESTROY_TIME, DESTROY_DESC
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    select 
    <include refid="Base_Column_List" />
    from oms_pub_destroy
    where ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    delete from oms_pub_destroy
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    insert into oms_pub_destroy (ID, USER_ID, DESTROYER, 
      ORG_ID, MOBILE, DESTROY_TIME, 
      DESTROY_DESC)
    values (#{id,jdbcType=VARCHAR}, #{userId,jdbcType=VARCHAR}, #{destroyer,jdbcType=VARCHAR}, 
      #{orgId,jdbcType=VARCHAR}, #{mobile,jdbcType=VARCHAR}, #{destroyTime,jdbcType=DATE}, 
      #{destroyDesc,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    insert into oms_pub_destroy
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="userId != null">
        USER_ID,
      </if>
      <if test="destroyer != null">
        DESTROYER,
      </if>
      <if test="orgId != null">
        ORG_ID,
      </if>
      <if test="mobile != null">
        MOBILE,
      </if>
      <if test="destroyTime != null">
        DESTROY_TIME,
      </if>
      <if test="destroyDesc != null">
        DESTROY_DESC,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="userId != null">
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="destroyer != null">
        #{destroyer,jdbcType=VARCHAR},
      </if>
      <if test="orgId != null">
        #{orgId,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="destroyTime != null">
        #{destroyTime,jdbcType=DATE},
      </if>
      <if test="destroyDesc != null">
        #{destroyDesc,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    update oms_pub_destroy
    <set>
      <if test="userId != null">
        USER_ID = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="destroyer != null">
        DESTROYER = #{destroyer,jdbcType=VARCHAR},
      </if>
      <if test="orgId != null">
        ORG_ID = #{orgId,jdbcType=VARCHAR},
      </if>
      <if test="mobile != null">
        MOBILE = #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="destroyTime != null">
        DESTROY_TIME = #{destroyTime,jdbcType=DATE},
      </if>
      <if test="destroyDesc != null">
        DESTROY_DESC = #{destroyDesc,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Jul 13 14:22:49 CST 2020.
    -->
    update oms_pub_destroy
    set USER_ID = #{userId,jdbcType=VARCHAR},
      DESTROYER = #{destroyer,jdbcType=VARCHAR},
      ORG_ID = #{orgId,jdbcType=VARCHAR},
      MOBILE = #{mobile,jdbcType=VARCHAR},
      DESTROY_TIME = #{destroyTime,jdbcType=DATE},
      DESTROY_DESC = #{destroyDesc,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <select id="selectSubmitDesApplyAll" parameterType="java.lang.String" resultType="com.hxoms.modules.publicity.destroyReg.entity.parameterEntity.SelDestroyApplyVO">
    SELECT
        a.ID id,
		a.ZTDW ztdw,
        a.CGSPDW cgspdw,
		b.WORK_UNIT work_Unit,
		CONCAT(b.SURNAME, b.NAME) name,
		date_format(a.CGSJ,'%Y.%m.%d') cgsj,
        date_format(a.HGSJ,'%Y.%m.%d') hgsj,
		a.SDGJ sdgj,
		a.CFRW cfrw,
	    b.SEX sex,
		b.BIRTH_DATE birthDate,
		b.POLITICAL_AFFINAME politicalAffiName,
		b.POST post,
		a.CREATE_TIME createTime,
		a.SFLG sflg,
		a.SMDJ smdj,
		b.MAIN_LEADER mainLeader,
		a.FMXX fmxx,
		a.CLSHSFTG clshsftg,
		a.JWJL jwjl,
		a.ZZJL zzjl
    FROM
        cf_user u
    INNER JOIN b01 d ON u.org_id = d.b0111
    INNER JOIN oms_pub_apply a ON d.b0100 = a.B0100
    INNER JOIN oms_reg_procpersoninfo b ON a.A0100 = b.A0100
	LEFT JOIN oms_pub_destroydetail c ON a.id=c.id
    WHERE
            u.user_id = #{id}
	AND a.SQZT='31'
	AND a.BAH is NOT NULL
	AND a.BAH !=''
	AND c.id is null
  </select>
  <select id="SelDestroyRegByQuaVoAll" parameterType="com.hxoms.modules.publicity.destroyReg.entity.parameterEntity.SelDestroyRegByQuaVo" resultType="com.hxoms.modules.publicity.destroyReg.entity.OmsPubDestroy">
    SELECT
        a.ID id,
        a.DESTROYER destroyer,
        a.ORG_ID orgId,
        a.MOBILE mobile,
        a.DESTROY_TIME destroyTime,
        a.DESTROY_DESC destroyDesc
    FROM
        cf_user b
    INNER JOIN oms_pub_destroy a ON b.org_id = a.ORG_ID
    WHERE
        b.user_id = #{id}
    <if test="startDate!=null">
      AND a.DESTROY_TIME &gt;=#{startDate}
    </if>
    <if test="endDate!=null">
      AND a.DESTROY_TIME &lt;=#{endDate}
    </if>
    <if test="applyName!=null and applyName!=''">
      AND a.DESTROY_DESC LIKE concat('%',#{applyName},'%')
    </if>
  </select>
</mapper>